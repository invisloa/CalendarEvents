<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CalendarT1.Views.AddNewTypePage"
             xmlns:controls="clr-namespace:CalendarT1.Views.CustomControls"
             Title="AddNewTypePage"
             x:Name="AddNewTypePageName">
    <ScrollView>
        <StackLayout>
            <CollectionView ItemsSource="{Binding MainEventTypesOC}" HorizontalOptions="FillAndExpand">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical"
                         Span="3" />
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Button 
                            Text="{Binding Text}"
                            Opacity="{Binding Opacity}"
                            BorderWidth="{Binding Border}"
                            Command="{Binding Path=BindingContext.EventTypeSelectedCommand, Source={x:Reference Name=AddNewTypePageName}}"
                            CommandParameter="{Binding .}"
                            HeightRequest="50"
                            BackgroundColor="{Binding Path=BindingContext.SelectedColor, Source={x:Reference Name=AddNewTypePageName}}"
                            />
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
            <!-- Textbox for new type name -->
            <Label Text="Enter new type name:"/>
            <Entry x:Name="TypeNameEntry" Placeholder="Type Name"/>

            <!-- Buttons for color selection -->

            <Label Text="Choose new type color:"/>
            <CollectionView ItemsSource="{Binding ButtonsColors}">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical"
                         Span="5" />
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Button 
                               BackgroundColor="{Binding ButtonColor}"
                               BorderWidth="{Binding ButtonBorder}"
                               Command="{Binding Path=BindingContext.SelectColorCommand, Source={x:Reference Name=AddNewTypePageName}}"
                               CommandParameter="{Binding .}"
                               IsVisible="True"/>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        <Button Text="{Binding SubmitButtonText}" Command="{Binding SubmitTypeCommand}" />
        </StackLayout>
    </ScrollView>
</ContentPage>
